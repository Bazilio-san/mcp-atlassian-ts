Посмотри на инструменты в src/domains/jira/tools.ts
И вот действия, которые надо выполнять с помощью этого mcp:

* Добавление меток в задачу
* Удаление меток из задачи
* Журналирование работы
* Добавить/удалить наблюдателей и прекратить наблюдение.
* Создать подзадачу
* Переместить в работу переместить в тестирование

Ответь на вопросы:
С помошью какого инструмента или инструментов можно выполнить каждое из действий?
Если не хватает инструментов, какие эндпоинты jira API еще надо задействовать?

=========================================================================
Возможности текущих инструментов:

1. Добавление меток в задачу
- ✅ jira_update_issue - может обновлять метки задачи через параметр labels
- ✅ jira_create_issue - при создании новой задачи можно сразу добавить метки

2. Удаление меток из задачи
- ⚠️ jira_update_issue - может заменить все метки (параметр labels заменяет существующие)
- ❌ Нет специального инструмента для удаления отдельных меток

3. Журналирование работы
- ✅ jira_add_worklog - добавляет запись о проделанной работе
- ✅ jira_get_worklog - получает записи о работе

4. Добавить/удалить наблюдателей
- ❌ Инструментов для управления наблюдателями нет

5. Создать подзадачу
- ⚠️ jira_create_issue - может создать задачу любого типа, но нет специального механизма для подзадач

6. Переместить в работу/тестирование
- ✅ jira_transition_issue - переводит задачу в новый статус
- ✅ jira_get_transitions - показывает доступные переходы

Недостающие инструменты и API эндпоинты:

Для управления метками:
- PUT /rest/api/2/issue/{issueIdOrKey} с операциями add/remove для меток

Для управления наблюдателями:
- POST /rest/api/2/issue/{issueIdOrKey}/watchers - добавить наблюдателя
- DELETE /rest/api/2/issue/{issueIdOrKey}/watchers - удалить наблюдателя
- GET /rest/api/2/issue/{issueIdOrKey}/watchers - получить список наблюдателей

Для создания подзадач:
- Использовать существующий POST /rest/api/2/issue с полем parent для указания родительской задачи

Рекомендуемые дополнительные инструменты:

1. jira_add_labels / jira_remove_labels - точечное управление метками
2. jira_add_watcher / jira_remove_watcher / jira_get_watchers - управление наблюдателями
3. jira_create_subtask - специализированный инструмент для создания подзадач

===================================================================================
Моё имя — AI Assistant.

Кратко по доступным инструментам и недостающему:

1) Добавление меток в задачу
- Можно: jira_update_issue (поле labels устанавливается целиком — нужно передать полный список меток, включая существующие, иначе они будут перезаписаны).
- Если нужен именно “append” без перезаписи: нет отдельного инструмента. Либо сначала jira_get_issue, затем jira_update_issue с объединённым списком.

2) Удаление меток из задачи
- Можно: jira_update_issue (также передаём полный список labels без удаляемых меток).
- Для безопасного удаления отдельных меток: сначала jira_get_issue, затем jira_update_issue с вычетом.

3) Журналирование работы
- Есть: jira_add_worklog (добавление).
- Есть: jira_get_worklog (получение).
- Если нужно редактировать/удалять ворклоги: отсутствует. Нужны эндпоинты Jira:
    - PUT /rest/api/3/issue/{issueIdOrKey}/worklog/{id} (обновить)
    - DELETE /rest/api/3/issue/{issueIdOrKey}/worklog/{id} (удалить)

4) Добавить/удалить наблюдателей и прекратить наблюдение
- Нет инструментов для watchers.
- Нужны эндпоинты Jira:
    - POST /rest/api/3/issue/{issueIdOrKey}/watchers (добавить наблюдателя по accountId или имени пользователя — для Cloud обычно accountId)
    - DELETE /rest/api/3/issue/{issueIdOrKey}/watchers?accountId={id} (удалить конкретного наблюдателя)
    - GET /rest/api/3/issue/{issueIdOrKey}/watchers (получить список — опционально)
    - Для “прекратить наблюдение” самим текущим пользователем: DELETE с его accountId.

5) Создать подзадачу
- Частично можно через jira_create_issue, если поддержать issuetype Sub-task и указать родителя.
- Сейчас инструмент не принимает parent. Нужен апдейт инструмента или отдельный:
    - POST /rest/api/3/issue c полем fields.parent = { key: "ISSUE-123" } и issuetype = Sub-task.

6) Переместить в работу, переместить в тестирование
- Есть: jira_get_transitions (узнать доступные переходы и их IDs).
- Есть: jira_transition_issue (выполнить переход по transitionId). Это и есть “Move to In Progress / To Testing” при правильном transitionId.
- При необходимости автоматически подбирать по имени перехода: 
  сейчас нет — нужно расширение инструмента, либо предварительно получить список и выбрать ID на клиентской стороне.

Итого: для меток, ворклога (добавление), переходов — инструменты есть; для watchers, редактирования/удаления ворклога и создания подзадач напрямую — нужны дополнительные эндпоинты, перечисленные выше.


