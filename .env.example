SERVICE_NAME=mcp-jira
SERVICE_INSTANCE=prod
PM2_NAMESPACE=prod
# Used for PM2 service configuration
#┌────┬───────────────────────────────────────────────────────────┬─────────────────┬
#│ id │ name                                                      │ namespace       │
#├────┼───────────────────────────────────────────────────────────┼─────────────────┼
#│ 1  │ <SERVICE_NAME | package.json.name>[--<SERVICE_INSTANCE>]  │ <PM2_NAMESPACE> │

# ==================================================
# MCP Atlassian TS Server - Environment Variables
# ==================================================

# --------------------------------------------------
# SERVICE MODE CONFIGURATION (REQUIRED)
# --------------------------------------------------

# Service mode - which service to run
# Options: jira (JIRA-only) or confluence (Confluence-only)
# REQUIRED - no default value
MCP_SERVICE_MODE=jira

# --------------------------------------------------
# SERVER CONFIGURATION
# --------------------------------------------------

# HTTP server port (default: 3000, range: 1024-65535)
SERVER_PORT=3000

# Server bind address
# '0.0.0.0' - Listen on all network interfaces
# 'localhost' - Listen only on local interface
SERVER_HOST=0.0.0.0

# Transport type for MCP communication
# Options: stdio (for Claude Desktop), http (for testing), sse (experimental)
TRANSPORT_TYPE=http

# --------------------------------------------------
# LOGGING CONFIGURATION
# --------------------------------------------------

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Pretty-print logs (true/false)
# Set to true for readable logs in development
LOG_PRETTY=true

# --------------------------------------------------
# RATE LIMITING
# --------------------------------------------------

# Rate limit window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# --------------------------------------------------
# CACHING
# --------------------------------------------------

# Cache TTL in seconds (default: 300 = 5 minutes)
# Reduces API calls by caching responses
CACHE_TTL_SECONDS=300

# Maximum number of cached items (default: 1000)
CACHE_MAX_ITEMS=1000

# --------------------------------------------------
# SSL/TLS CONFIGURATION
# --------------------------------------------------

# Reject unauthorized SSL certificates (0 = false, 1 = true)
# Set to 0 for self-signed certificates (not recommended for production)
NODE_TLS_REJECT_UNAUTHORIZED=1

# --------------------------------------------------
# JIRA CONFIGURATION
# --------------------------------------------------

# JIRA instance URL
# Example: https://jira.company.com
JIRA_URL=https://jira.company.com

# JIRA Authentication (choose ONE method):

# 1. Basic Auth: username + password/API token (RECOMMENDED)
JIRA_USERNAME=your-username
JIRA_PASSWORD=your-jira-api-token

# 2. Personal Access Token (uncomment to use)
# JIRA_PAT=your-jira-personal-access-token

# 2. Personal Access Token
# JIRA_PAT=your-jira-pat

# 3. OAuth 2.0
# JIRA_OAUTH_CLIENT_ID=your-oauth-client-id
# JIRA_OAUTH_CLIENT_SECRET=your-oauth-client-secret
# JIRA_OAUTH_ACCESS_TOKEN=your-oauth-access-token

# Epic Link custom field ID (default: customfield_10008)
# This field ID varies by JIRA instance. To find your Epic Link field ID:
# 1. Go to JIRA Settings → Issues → Custom Fields
# 2. Find "Epic Link" field and get its ID
# JIRA_EPIC_LINK_FIELD_ID=customfield_10008
# JIRA_OAUTH_REFRESH_TOKEN=your-oauth-refresh-token
# JIRA_OAUTH_REDIRECT_URI=http://localhost:3000/oauth/callback

# User Lookup Service (optional)
# Enable fuzzy user search via microservice for assignee/reporter fields
JIRA_USER_LOOKUP_ENABLED=false
JIRA_USER_LOOKUP_SERVICE_URL=http://localhost:8080/api/search/employee

# --------------------------------------------------
# CONFLUENCE AUTHENTICATION (Required for Confluence service)
# --------------------------------------------------

# Confluence instance URL
# Example: https://wiki.company.com
CONFLUENCE_URL=https://wiki.company.com

# Confluence Authentication (choose ONE method):

# 1. Basic Auth: username + password/API token (RECOMMENDED)
CONFLUENCE_USERNAME=your-username
CONFLUENCE_PASSWORD=your-confluence-api-token

# 2. Personal Access Token (uncomment to use)
# CONFLUENCE_PAT=your-confluence-personal-access-token

# 3. OAuth 2.0 (uncomment to use)
# CONFLUENCE_OAUTH_CLIENT_ID=your-oauth-client-id
# CONFLUENCE_OAUTH_CLIENT_SECRET=your-oauth-client-secret
# CONFLUENCE_OAUTH_ACCESS_TOKEN=your-oauth-access-token
# CONFLUENCE_OAUTH_REFRESH_TOKEN=your-oauth-refresh-token
# CONFLUENCE_OAUTH_REDIRECT_URI=http://localhost:3000/oauth/callback

# Maximum results per Confluence API request (default: 50, max: 100)
CONFLUENCE_MAX_RESULTS=50

# --------------------------------------------------
# ADVANCED CONFIGURATION
# --------------------------------------------------

# Environment variable suffix for loading additional .env files
# Example: Set to "prod" to also load .env.prod
SUFFIX_ENV=

# Debug mode (true/false) - enables verbose logging
DEBUG=false

TEST_ADD_X_HEADER=x-user:vpupkin
TEST_JIRA_PROJECT=TEST
TEST_ISSUE_KEY= # ${TEST_JIRA_PROJECT}-1
TEST_SECOND_ISSUE_KEY=
TEST_EPIC_ISSUE_KEY=
TEST_ISSUE_TYPE_NAME=Task
TEST_USERNAME=vpupkin

TOOL_ANSWER_AS=structuredContent
